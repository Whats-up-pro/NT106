<Window x:Class="ThreeMess.SignupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:ThreeMess.ViewModels"
        mc:Ignorable="d"
        Title="Đăng ký" Height="540" Width="720" WindowStartupLocation="CenterScreen"
        Background="#FFF5F6F8" Opacity="0">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </Window.Resources>

    <Window.DataContext>
        <vm:SignupViewModel />
    </Window.DataContext>

    <Grid Margin="18">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Left: Form card -->
        <Border Grid.Column="0" Background="White" CornerRadius="18" Padding="26" BorderBrush="#FFE5E7EB" BorderThickness="1" Margin="0,0,14,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Button Click="BackToLanding_Click" HorizontalAlignment="Left" Background="Transparent" BorderThickness="0" Padding="0" Margin="0,0,0,8">
                    <TextBlock Text="←" FontSize="18" Foreground="#FF111827" />
                </Button>

                <TextBlock Text="Sign up" FontSize="28" FontWeight="SemiBold" Foreground="#FF111827" HorizontalAlignment="Center" />

                <!-- Step 1 -->
                <StackPanel Grid.Row="1" Margin="0,16,0,0" Visibility="{Binding IsStep1, Converter={StaticResource BoolToVis}}">
                    <TextBox Style="{StaticResource WatermarkTextBox}" Tag="Email"
                             Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" />

                    <PasswordBox x:Name="PasswordBox" Style="{StaticResource WatermarkPasswordBox}" Tag="Password" Margin="0,12,0,0" />

                    <PasswordBox x:Name="ConfirmPasswordBox" Style="{StaticResource WatermarkPasswordBox}" Tag="Confirm password" Margin="0,12,0,0" />

                    <Button Command="{Binding NextCommand}" Height="42" Margin="0,16,0,0"
                            Background="#FF38BDF8" Foreground="White" BorderThickness="0">
                        <TextBlock Text="Next" FontWeight="SemiBold" FontSize="14" />
                    </Button>

                    <StackPanel Margin="0,12,0,0" HorizontalAlignment="Center" Orientation="Horizontal">
                        <TextBlock Text="Already have an account ? " Foreground="#FF6B7280" FontSize="12" />
                        <Button Click="OpenLogin_Click" Background="Transparent" BorderThickness="0" Padding="0">
                            <TextBlock Text="Login" Foreground="#FF2563EB" FontSize="12" />
                        </Button>
                    </StackPanel>
                </StackPanel>

                <!-- Step 2 -->
                <StackPanel Grid.Row="1" Margin="0,16,0,0" Visibility="{Binding IsStep2, Converter={StaticResource BoolToVis}}">
                    <TextBox Style="{StaticResource WatermarkTextBox}" Tag="Display name"
                             Text="{Binding DisplayName, UpdateSourceTrigger=PropertyChanged}" />

                    <StackPanel Orientation="Horizontal" Margin="0,16,0,0" HorizontalAlignment="Center">
                        <Button Command="{Binding BackCommand}" Width="110" Height="40" Margin="0,0,10,0"
                                Background="#FFE5E7EB" Foreground="#FF111827" BorderThickness="0">
                            <TextBlock Text="Back" FontWeight="SemiBold" />
                        </Button>
                        <Button Command="{Binding SignupCommand}" Width="170" Height="40"
                                Background="#FF38BDF8" Foreground="White" BorderThickness="0">
                            <TextBlock Text="Sign up" FontWeight="SemiBold" />
                        </Button>
                    </StackPanel>

                    <StackPanel Margin="0,12,0,0" HorizontalAlignment="Center" Orientation="Horizontal">
                        <TextBlock Text="Already have an account ? " Foreground="#FF6B7280" FontSize="12" />
                        <Button Click="OpenLogin_Click" Background="Transparent" BorderThickness="0" Padding="0">
                            <TextBlock Text="Login" Foreground="#FF2563EB" FontSize="12" />
                        </Button>
                    </StackPanel>
                </StackPanel>

                <TextBlock Grid.Row="6" Text="{Binding Status}" Foreground="#FFDC2626" Margin="0,14,0,0" TextWrapping="Wrap" />
            </Grid>
        </Border>

        <!-- Right: Logo area -->
        <Border Grid.Column="1" Background="Transparent" CornerRadius="18" Padding="26">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <Grid Width="220" Height="220" Margin="0,0,0,12">
                    <Ellipse Fill="#00000000" />
                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE8BD;" FontSize="86" Foreground="#FF111827"
                               HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Grid>
                <TextBlock Text="3Mess" FontSize="38" FontWeight="SemiBold" Foreground="#FF111827" HorizontalAlignment="Center" />
                <TextBlock Text="Simple. Fast. Real-time." Foreground="#FF6B7280" FontSize="13" HorizontalAlignment="Center" Margin="0,6,0,0" />
            </StackPanel>
        </Border>
    </Grid>
</Window>

